module.exports=function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},o.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o.w={},o(o.s=16)}([function(e,t){e.exports=require("mongoose")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("passport")},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={databaseUrl:"mongodb://ierso:6035cp!@ds211440.mlab.com:11440/cocktails-db",port:process.env.PORT||5e3,googleClientID:"21187341593-lc5go41k600chrj3rkm57hqjumjbao3j.apps.googleusercontent.com",googleClientSecret:"7yOiDOH1Ah8XUztgkUahE7md"}},function(e,t){e.exports=require("express-handlebars")},function(e,t){e.exports=require("cookie-parser")},function(e,t){e.exports=require("express-session")},function(e,t){e.exports=require("body-parser")},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=o(0),u=(n=r)&&n.__esModule?n:{default:n};var a=new r.Schema({name:{type:String,required:!0},email:{type:String,required:!0},password:{type:String,required:!0},date:{type:Date,default:Date.now}});t.default=u.default.model("users",a)},function(e,t){e.exports=require("bcryptjs")},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(o(1)),r=l(o(9)),u=l(o(2)),a=l(o(8));function l(e){return e&&e.__esModule?e:{default:e}}var s=n.default.Router();s.get("/login",function(e,t){t.render("users/login")}),s.post("/login",u.default.authenticate("local"),function(e,t){t.redirect("/ideas")}),s.get("/register",function(e,t){t.render("users/register")}),s.post("/register",function(e,t){var o=[];e.body.password.length<4&&o.push({text:"Password must be at least 4 characters"}),o.length>0?t.render("users/register",{errors:o,name:e.body.name,email:e.body.email,password:e.body.password}):a.default.findOne({email:e.body.email}).then(function(n){if(n)t.send({text:"Email already exists"}),o.push({text:"Email already exists"});else{var u=new a.default({name:e.body.name,email:e.body.email,password:e.body.password});r.default.genSalt(10,function(e,o){r.default.hash(u.password,o,function(e,o){if(e)throw e;u.password=o,u.save().then(function(e){t.redirect("/users/login")}).catch(function(e){console.log(e)})})})}})}),s.get("/logout",function(e,t){e.logout(),t.send({text:"You have logged out"})}),t.default=s},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=o(0),u=(n=r)&&n.__esModule?n:{default:n};var a=new r.Schema({title:{type:String,required:!0},details:{type:String,required:!0},date:{type:Date,default:Date.now},_user:{type:r.Schema.Types.ObjectId,ref:"users"}});t.default=u.default.model("ideas",a)},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(o(1)),r=u(o(11));function u(e){return e&&e.__esModule?e:{default:e}}var a=n.default.Router();a.get("/",function(e,t){r.default.find({}).sort({date:"desc"}).then(function(e){t.render("ideas/index",{ideas:e})})}),a.get("/add",function(e,t){t.render("ideas/add")}),a.delete("/:id",function(e,t){r.default.remove({_id:e.params.id}).then(function(){t.redirect("/")})}),a.post("/",function(e,t){var o=[];if(e.body.title||o.push({text:"Please add a title"}),e.body.details||o.push({text:"Please add a title"}),o.length>0)t.render("ideas/add",{errors:o,title:e.body.title,details:e.body.details});else{console.log(e.user);var n={title:e.body.title,details:e.body.details};new r.default(n).save().then(function(e){t.redirect("/ideas")})}}),t.default=a},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(o(1)),r=u(o(2));function u(e){return e&&e.__esModule?e:{default:e}}var a=n.default.Router();a.get("/google",r.default.authenticate("google",{scope:["profile","email"]})),a.get("/google/callback",r.default.authenticate("google",{failureRedirect:"/login"}),function(e,t){t.redirect("/")}),t.default=a},function(e,t){e.exports=require("passport-google-oauth20")},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.use(new s({clientID:a,clientSecret:l,callbackURL:"/auth/google/callback",proxy:!0},function(e,t,o,n){console.log(e),console.log(o)}))};var n=u(o(14)),r=(u(o(0)),u(o(3)));function u(e){return e&&e.__esModule?e:{default:e}}var a=r.default.googleClientID,l=r.default.googleClientSecret,s=n.default.Strategy},function(e,t,o){"use strict";var n=y(o(1)),r=y(o(0)),u=y(o(2)),a=o(3),l=y(a),s=y(o(15)),i=y(o(13)),d=y(o(12)),c=y(o(10)),f=y(o(7)),g=y(o(6)),p=y(o(5)),b=y(o(4));function y(e){return e&&e.__esModule?e:{default:e}}var h=l.default.databaseUrl,v=l.default.port,m=(0,n.default)();console.log(a.googleClientID,a.googleClientSecret),m.listen(v,function(){console.log("listening on "+v)}),m.get("/",function(e,t){t.send("index")}),(0,s.default)(u.default),m.use("/auth",i.default),m.use("/ideas",d.default),m.use("/users",c.default),
//! remove later
m.use((0,p.default)()),m.use((0,g.default)({secret:"secret",resave:!1,saveUninitialized:!1})),m.use(u.default.initialize()),m.use(u.default.session()),m.use(function(e,t,o){t.locals.user=e.user||null,o()}),r.default.connect(h).then(function(){return console.log("MongoDB Connected")}).catch(function(e){return console.log(e)}),m.engine("handlebars",(0,b.default)({defaultLayout:"main"})),m.set("view engine","handlebars"),m.use(f.default.urlencoded({extended:!1})),m.use(f.default.json())}]);